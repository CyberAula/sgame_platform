var API_1484_11,jq191;
SGAME=function(x){var m=function(b){var a=!1;return{init:function(b){!0===b&&(a=b)},log:function(b){a&&window.console&&console.log(b)}}}(),s=function(b){return{getDuration:function(b){var a=[31104E3,2592E3,604800,86400,3600,60,1];try{var e;var f=b;b=[2,3,4,5,7,8,9];var d=[0,0,0,0,0,0,0],c;if(f=f.toUpperCase()){if("string"!==typeof f)throw Error("Invalid iso8601 period string '"+f+"'");if(c=/^P((\d+Y)?(\d+M)?(\d+W)?(\d+D)?)?(T(\d+H)?(\d+M)?(\d+S)?)?$/.exec(f))for(f=0;f<b.length;f++){var w=b[f];d[f]=
c[w]?+c[w].replace(/[A-Za-z]+/g,""):0}else throw Error("String '"+f+"' is not a valid ISO8601 period.");}e=d}catch(g){return null}for(w=c=0;w<e.length;w++)c+=e[w]*a[w];return c}}}(),v=function(b){var a=b,e=b,k=function(){"undefined"!=typeof a&&(a.style.display="none",a.parentNode.removeChild(a),API_1484_11=a=b)},f=function(){k();var a=t.stop();"function"===typeof e&&e(a);e=b};return{init:function(){},create:function(b,d){k();e=d;API_1484_11=new Local_API_1484_11({},jq191);var c=850,g=650,h={},l;b&&
(b.width&&(c=b.width),b.height&&(g=b.height),b.lo&&(h=b.lo),"string"==typeof h.url&&(l=h.url));if("string"==typeof l){var p=document.createElement("div");p.style.width=c+"px";p.style.height=g+"px";p.style.overflow="hidden";p.style.background="white";p.style.position="absolute";p.style.top=0;p.style.zindex=9999;p.style.borderRadius="1em";p.style.border="2px solid black";p.setAttribute("id","test");p.style.marginLeft=(window.innerWidth-c)/2+"px";p.style.marginTop=(window.innerHeight-g)/2+"px";c=document.createElement("img");
c.src="/assets/sgame/close.png";c.style.width="25px";c.style.height="25px";c.style.padding="5px";c.style.cursor="pointer";c.style.position="absolute";c.style.right=0;c.onclick=function(){f()};p.appendChild(c);c=document.createElement("img");c.id="semaphore";c.src="/assets/sgame/semaphore/semaphore_red.png";c.style.width="45px";c.style.height="40px";c.style.padding="5px";c.style.position="absolute";c.style.left="0px";c.style.top="0px";p.appendChild(c);c=document.createElement("iframe");c.src=l;c.style.width=
"95%";c.style.height="95%";c.style.marginLeft="2.5%";c.style.marginTop="40px";c.style.overflow="hidden";c.style.overflowY="auto";c.scrolling="yes";c.style.frameBorder="0";c.style.borderStyle="none";p.appendChild(c);a=p;document.body.appendChild(p);t.start(c,h,API_1484_11)}},closeCurrentFancybox:f}}(),t=function(b){var a=!0,c=b,e=b,f=b,d,g,h,n,y,q,p=function(){f=e=c=b;d=Date.now();g=!1;q=y=n=h=b},r=function(){"sco"==e.scorm_type&&(f.addListener("cmi.success_status",function(b){h=b;"passed"===h&&"green"!=
l.getCurrentColor()&&(l.stop(),l.changeColor("green"))}),f.addListener("cmi.score.scaled",function(b){n=b;0.8<=n&&"green"!=l.getCurrentColor()&&(l.stop(),l.changeColor("green"))}),f.addListener("cmi.completion_status",function(b){y=b}),f.addListener("cmi.progress_measure",function(b){q=b}))};return{start:function(b,d,g){if(!1===a||"undefined"!=typeof c)return null;a=!1;p();c=b;e=d;f=g;r();l.changeColor("red");if("asset"==e.scorm_type){b:{b=e.lom_metadata;if(b.educational&&b.educational.typicalLearningTime&&
b.educational.typicalLearningTime.duration&&b.educational.typicalLearningTime.duration.langstrings&&b.educational.typicalLearningTime.duration.langstrings["x-none"]&&(b=s.getDuration(b.educational.typicalLearningTime.duration.langstrings["x-none"])))break b;b=null}b=b?Math.min(0.5*b,60):15;m.log("Required Time: "+b);l.setUpBlink("yellow",0.5*b-0.5,0.5*b);l.changeColor("green",b)}},stop:function(){if(!0===a||"undefined"==typeof c)return null;a=!0;l.stop();var b=Math.round((Date.now()-d)/1E3);g="green"===
l.getCurrentColor();b={lo_metadata:e,time:b,success:g};"undefined"!=typeof h&&(b.scorm_success_status=h);"undefined"!=typeof n&&(b.scorm_scaled_score=n);"undefined"!=typeof y&&(b.scorm_completion_status=y);"undefined"!=typeof q&&(b.scorm_progress_measure=q);p();return b},isStopped:function(){return a}}}(),l=function(b){var a,e,c,f,d,g=function(b){var e=document.getElementById("semaphore");e&&(a=b,e.src=h(b))},h=function(b){switch(b){case "green":return"/assets/sgame/semaphore/semaphore_green.png";
case "yellow":return"/assets/sgame/semaphore/semaphore_yellow.png";case "red":return"/assets/sgame/semaphore/semaphore_red.png";default:return"/assets/sgame/semaphore/semaphore.png"}},l=function(b,a){var e=document.getElementById("semaphore");if(e){var c=!1;f=setInterval(function(){e&&(c?(e.src=h(null),c=!1):(e.src=h(b),c=!0))},500);d=setTimeout(function(){clearTimeout(f)},1E3*a)}};return{getCurrentColor:function(){return a},changeColor:function(b,a){a?e=setTimeout(function(){g(b)},1E3*a):g(b)},setUpBlink:function(b,
a,e){e?c=setTimeout(function(){l(b,a)},1E3*e):l(b,a)},stop:function(){e&&clearTimeout(e);c&&clearTimeout(c);f&&clearTimeout(f);d&&clearTimeout(d)}}}();m.init(!0);var u={},q=[],f={},n=x,r=function(b,a){"object"!=typeof b||"string"!=typeof b.url?"function"==typeof a&&a(null,null):(e(),v.create({lo:b},function(b){m.log("LO report");m.log(b);"function"==typeof a&&a(b.success,b);e()}))},d=function(b,e,c){try{a("undefined"==typeof b?"/lo/random/metadata.json":"/lo/"+b+"/metadata.json",function(b){e(b)})}catch(f){c(f)}},
a=function(b,a){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var b=JSON.parse(e.responseText);a(b)}};e.open("GET",b,!0);e.send("")},h=function(b){var a;a=[];for(var e=0;e<b.length;e++)!1===b[e].marked&&a.push(b[e]);if(0<a.length)a=g(a);else{for(e=0;e<b.length;e++)b[e].marked=!1;a=g(b)}b[b.indexOf(a)].marked=!0;return{lo:a,los:b}},g=function(b){if("number"==typeof b)return b;var a;a=b.length-1;if("number"!=typeof a)throw{name:"Invalid number format exception"};
a=Math.round(0+Math.random()*(a-0));return b[a]},e=function(){"function"===typeof n&&n()},c=function(b,a){if("string"===typeof b&&"function"===typeof a){var e=document.getElementsByTagName("head")[0];if(e){var c=document.createElement("script");c.setAttribute("src",b);c.setAttribute("type","text/javascript");c.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||a()};c.onload=a;e.appendChild(c)}}};return{init:function(b){m.log("SGAME init with options ");m.log(b);
b&&"function"===typeof b.togglePause&&(n=b.togglePause)},loadSettings:function(b){m.log("SGAME load settings ");m.log(b);c("http://code.jquery.com/jquery-1.9.1.js",function(){$.noConflict();jq191=jQuery.noConflict(!0)});u={};q=[];f={};if(b.lo_list)for(var a=0;a<b.lo_list.length;a++)"undefined"!=typeof b.lo_list[a].id&&(u[b.lo_list[a].id]=b.lo_list[a],q.push({id:b.lo_list[a].id,marked:!1}));if(b.event_mapping)for(a=0;a<b.event_mapping.length;a++){var e=b.event_mapping[a];f[e.event_id]={};f[e.event_id].los=
[];for(var d=0;d<e.los_id.length;d++)f[e.event_id].los.push({id:e.los_id[d],marked:!1})}},triggerLO:function(b,a){var e=f[b].los;if(e){var c;a:{for(c=0;c<e.length;c++)if("*"===e[c].id){c=!0;break a}c=!1}c?(e=h(q),q=e.los):(e=h(e),f[b].los=e.los);r(u[e.lo.id],a)}},showLO:r,showRandomLO:function(b){d(x,function(a){r(a,b)},function(){"function"==typeof b&&b(null,null)})},closeLO:function(){v.closeCurrentFancybox()}}}();SGAME.VERSION="0.2";SGAME.AUTHORS="Aldo Gordillo, Enrique Barra";SGAME.URL="http://github.com/agordillo/sgame";
SGAME.EVENT={};SGAME.EVENT.GENERIC="generic";SGAME.EVENT.EXTRA_LIFE="extra_life";SGAME.EVENT.EXTRA_SKILL="extra_skill";SGAME.EVENT.EXTRA_ITEM="extra_item";SGAME.EVENT.BLOCKER="blocker";SGAME.EVENT.CHEAT="cheat";SGAME.EVENT.CONTINUE="continue";
function Local_API_1484_11(x,m){function s(a,c){d.diganostic="The "+a+" of "+c+" must be a proper vocabulary element.";d.errorCode=406;return"false"}function v(a){d.errorCode=402;d.diagnostic="The value for key "+a+" has not been created yet.";return"false"}function t(a,c){d.errorCode=201;d.diagnostic="The value for key "+a+" is not valid.";return"false"}function l(a,c,b){a=a.split(/\./);2>a.length?b[a[0]]=c:(b[a[0]]||(b[a[0]]={}),b=b[a.shift()],l(a.join("."),c,b))}function u(a,c){var b=a.split(/\./),
f;if(2>b.length)try{return c[b[0]]}catch(d){return v(a),"false"}else{f=b.shift();if(c[f])return String(u(b.join("."),c[f]));v(a);return"false"}}function q(a){var c,b=0;for(c in a)a.hasOwnProperty(c)&&(b+=1);return b}function f(a,c){if(d.debug){window.console||(window.console={},window.console.info=noconsole,window.console.log=noconsole,window.console.warn=noconsole,window.console.error=noconsole,window.console.trace=noconsole);switch(c){case 1:console.error(a);break;case 2:console.warn(a);break;case 4:console.info(a);
break;case 3:console.log(a);break;default:return console.log(a),!1}return!0}3>c&&d.throw_alerts&&alert(a);return!1}function n(a,c){if("function"==typeof d.listeners[a]&&"undefined"!=typeof c)d.listeners[a](c)}if(m)var r=m;"use strict";var d=r.extend({version:"2.3",moddate:"20/04/2016 7:10PM",createdate:"07/17/2010 08:15AM",prefix:"Local_API_1484_11",errorCode:0,diagnostic:"",initialized:0,terminated:0,debug:!0,listeners:{},CMI:{_version:"Local 1.0",comments_from_learner:{_children:"comment,location,timestamp",
_count:"0"},comments_from_lms:{_children:"comment,location,timestamp",_count:"0"},completion_status:"unknown",completion_threshold:"0.7",credit:"no-credit",entry:"ab-initio",exit:"",interactions:{_children:"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description",_count:"0"},launch_data:"?name1=value1&name2=value2&name3=value3",learner_id:"100",learner_name:"Simulated User",learner_preference:{_children:"audio_level,language,delivery_speed,audio_captioning",
audio_level:"1",language:"",delivery_speed:"1",audio_captioning:"0"},location:"",max_time_allowed:"",mode:"normal",objectives:{_children:"id,score,success_status,completion_status,description",_count:"0"},progress_measure:"",scaled_passing_score:"0.7",score:{_children:"scaled,raw,min,max",scaled:"",raw:"",min:"",max:""},session_time:"PT0H0M0S",success_status:"unknown",suspend_data:"",time_limit_action:"",total_time:"PT0H0M0S"}},x),a={},h={0:"No error",101:"General exception",102:"General Initialization Failure",
103:"Already Initialized",104:"Content Instance Terminated",111:"General Termination Failure",112:"Termination Before Initialization",113:"Termination After Termination",122:"Retrieve Data Before Initialization",123:"Retrieve Data After Termination",132:"Store Data Before Initialization",133:"Store Data After Termination",142:"Commit Before Initialization",143:"Commit After Termination",201:"General Argument Error",301:"General Get Failure",351:"General Set Failure",391:"General Commit Failure",401:"Undefined Data Model",
402:"Unimplemented Data Model Element",403:"Data Model Element Value Not Initialized",404:"Data Model Element Is Read Only",405:"Data Model Element Is Write Only",406:"Data Model Element Type Mismatch",407:"Data Model Element Value Out Of Range",408:"Data Model Dependency Not Established"},g=this;this.isRunning=function(){return 1===d.initialized&&0===d.terminated};this.Initialize=function(){f(d.prefix+":  Initializing...",3);d.cmi?(a=d.cmi,"suspend"===a.exit&&(a.entry="resume")):a=d.CMI;d.initialized=
1;d.terminated=0;return"true"};this.GetValue=function(e){d.errorCode=0;var c="false";e=e.toString();var b=[];if(this.isRunning()){b=e.split(".");if(0<="|exit|session_time|".indexOf("|"+b[b.length-1]+"|"))return f(d.prefix+": This "+e+" is write only",4),d.errorCode=405,"false";b=e.toLowerCase().split(".");switch(b[0]){case "cmi":switch(c="false",e){case "cmi.exit":case "cmi.session_time":d.errorCode=405;d.diagnostic="Sorry, this has been specified as a read-only value for "+e;break;case "cmi.learner_name":c=
d.CMI.learner_name;break;default:c=u(e.substr(4,e.length),a),"undefined"===c&&(d.errorCode=401,d.diagnostic="Sorry, there was a undefined response from "+e,c="false"),f(d.prefix+": GetValue "+e+" = "+c,4)}}return c}d.errorCode=123;return c};this.SetValue=function(e,c){f(d.prefix+": SetValue: "+e+" = "+c,4);d.errorCode=0;var b=[],g=e.toString(),h=c.toString(),k=0,m=0,k=[];if(this.isRunning()){k=g.split(".");if("adl"===k[0]&&"id"===k[4]||"comments_from_lms"===k[1]||("comments_from_learner"===k[1]?0:
0<="|_version|completion_threshold|credit|entry|launch_data|learner_id|learner_name|_children|_count|mode|maximum_time_allowed|scaled_passing_score|time_limit_action|total_time|comment|".indexOf("|"+k[k.length-1]+"|")))return f(d.prefix+": This "+g+" is read only",4),d.errorCode=404,"false";b=g.split(".");switch(b[0]){case "cmi":switch(e){case "cmi.location":1E3<h.length&&f(d.prefix+": Some LMS's might truncate your bookmark as you've passed "+h.length+" characters of bookmarking data",2);break;case "cmi.progress_measure":k=
parseFloat(h);if("number"!=typeof k||isNaN(k))return t(e,h);k=Math.max(0,Math.min(1,k));n(e,k);break;case "cmi.completion_status":if(-1==="|completed|incomplete|not attempted|unknown|".indexOf("|"+h+"|"))return s(e,h);n(e,h);break;case "cmi.exit":if(-1==="|time-out|suspend|logout|normal||".indexOf("|"+h+"|"))return s(e,h);break;case "cmi.score.scaled":k=parseFloat(h);if("number"!=typeof k||isNaN(k))return t(e,h);k=Math.max(0,Math.min(1,k));n(e,k);break;case "cmi.score.min":k=parseFloat(h);if("number"!=
typeof k||isNaN(k))return t(e,h);d.CMI.score.min=k;break;case "cmi.score.max":k=parseFloat(h);if("number"!=typeof k||isNaN(k))return t(e,h);d.CMI.score.max=k;break;case "cmi.score.raw":k=parseFloat(h);if("number"!=typeof k||isNaN(k))return t(e,h);m=parseFloat(d.CMI.score.max);m="number"!=typeof m||isNaN(m)?100:m;b=parseFloat(d.CMI.score.min);b="number"!=typeof b||isNaN(b)?0:b;m-=b;0>=m&&(m=100);k=Math.max(0,Math.min(1,(k-b)/m));n("cmi.score.scaled",k);break;case "cmi.success_status":if(-1==="|passed|failed|unknown|".indexOf("|"+
h+"|"))return s(e,h);n(e,h);break;default:switch(b[1]){case "comments_from_lms":return d.errorCode="404",d.diagnostic="The cmi.comments_from_lms element is entirely read only.","false";case "comments_from_learner":if(-1===a.comments_from_learner._children.indexOf(b[3]))return s(e,h);l(g.substr(4,g.length),h,a);a.comments_from_learner._count=(q(a.comments_from_learner)-2).toString();return"true";case "interactions":if(-1===a.interactions._children.indexOf(b[3]))return s(e,h);a.interactions._count=
(q(a.interactions)-2).toString();if(isNaN(parseInt(b[2],10)))return"false";if(!r.isPlainObject(a.interactions[b[2]])){if("id"===b[3])return a.interactions[b[2]]={},l(g.substr(4,g.length),h,a),a.interactions._count=(q(a.interactions)-2).toString(),r.isPlainObject(a.interactions[b[2]].objectives)||(f(d.prefix+": Constructing objectives object for new interaction",4),a.interactions[b[2]].objectives={},a.interactions[b[2]].objectives._count="-1"),r.isPlainObject(a.interactions[b[2]].correct_responses)||
(f(d.prefix+": Constructing correct responses object for new interaction",4),a.interactions[b[2]].correct_responses={},a.interactions[b[2]].correct_responses._count="-1"),"true";f("Can't add interaction without ID first!",3);return"false"}if("objectives"===b[3]){if("id"===b[5])for(m=parseInt(a.interactions[b[2]].objectives._count,10),k=0;k<m;k+=1){if(a.interactions[b[2]].objectives[k].id===h)return g=e,d.errorCode="351",d.diagnostic="The "+g+" element must be unique.  The value '"+h+"' has already been set in #"+
k,"false"}else return s(e,h);l(g.substr(4,g.length),h,a);a.interactions[b[2]].objectives._count=(q(a.interactions[b[2]].objectives)-1).toString();return"true"}"correct_responses"===b[3]&&(l(g.substr(4,g.length),h,a),a.interactions[b[2]].correct_responses._count=(q(a.interactions[b[2]].correct_responses)-1).toString());l(g.substr(4,g.length),h,a);a.interactions._count=(q(a.interactions)-2).toString();return"true";case "objectives":if("id"===b[3])for(m=parseInt(a.objectives._count,10),k=0;k<m;k+=1)if(a.objectives[k].id===
h)return d.errorCode="351",d.diagnostic="The objectives.id element must be unique.  The value '"+h+"' has already been set in objective #"+k,"false";if("id"!==b[3]&&(k=parseInt(b[2],10),void 0===a.objectives[k]))return d.errorCode="408",d.diagnostic="The objectives.id element must be set before other elements can be set","false";if(isNaN(parseInt(b[2],10)))return"false";l(g.substr(4,g.length),h,a);a.objectives._count=(q(a.objectives)-2).toString();return"true"}}l(g.substr(4,g.length),h,a)}return"true"}d.errorCode=
d.terminated?133:132;return"false"};this.Commit=function(){f(d.prefix+": Commit CMI Object:",4);f(a);f(d.prefix+": Suspend Data Usage "+(Math.round(100*(a.suspend_data.length/64E3)*Math.pow(10,2))/Math.pow(10,2)+"%"));r(g).triggerHandler({type:"StoreData",runtimedata:a});return"true"};this.Terminate=function(){g.Commit();d.terminated=1;d.initialized=0;return"true"};this.GetErrorString=function(a){return""!==a&&(a=parseInt(a,10),void 0!==h[a])?h[a]:""};this.GetLastError=function(){return d.errorCode};
this.GetDiagnostic=function(){return d.diagnostic};this.addListener=function(a,c){"string"==typeof a&&"function"==typeof c&&(d.listeners[a]=c)};this.setCMILMSValue=function(a,c){"string"==typeof a&&(d.CMI[a]=c)}}
function Local_API_SCORM_12(x){function m(a,h){f.diganostic="The "+a+" of "+h+" must be a proper vocabulary element.";f.errorCode=406;return"false"}function s(a){f.errorCode=402;f.diagnostic="The value for key "+a+" has not been created yet.";return"false"}function v(a,h){f.errorCode=201;f.diagnostic="The value for key "+a+" is not valid.";return"false"}function t(a,f,d){a=a.split(/\./);2>a.length?d[a[0]]=f:(d[a[0]]||(d[a[0]]={}),d=d[a.shift()],t(a.join("."),f,d))}function l(a,f){var d=a.split(/\./),
e;if(2>d.length)try{return f[d[0]]}catch(c){return s(a),"false"}else{e=d.shift();if(f[e])return String(l(d.join("."),f[e]));s(a);return"false"}}function u(a,d){if(f.debug){window.console||(window.console={},window.console.info=noconsole,window.console.log=noconsole,window.console.warn=noconsole,window.console.error=noconsole,window.console.trace=noconsole);switch(d){case 1:console.error(a);break;case 2:console.warn(a);break;case 4:console.info(a);break;case 3:console.log(a);break;default:return console.log(a),
!1}return!0}3>d&&f.throw_alerts&&alert(a);return!1}function q(a,d){if("function"==typeof f.listeners[a]&&"undefined"!=typeof d)f.listeners[a](d)}var f=$.extend({version:"1.0",moddate:"20/04/2016 7:10PM",createdate:"20/04/2016 7:10PM",prefix:"Local_API_SCORM_12",errorCode:0,diagnostic:"",initialized:0,terminated:0,debug:!0,listeners:{},CMI:{_version:"Local 1.0",comments_from_learner:{_children:"comment,location,timestamp",_count:"0"},comments_from_lms:{_children:"comment,location,timestamp",_count:"0"},
lesson_status:"unknown",completion_threshold:"0.7",credit:"no-credit",entry:"ab-initio",exit:"",interactions:{_children:"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description",_count:"0"},launch_data:"?name1=value1&name2=value2&name3=value3",learner_id:"100",learner_name:"Simulated User",learner_preference:{_children:"audio_level,language,delivery_speed,audio_captioning",audio_level:"1",language:"",delivery_speed:"1",audio_captioning:"0"},location:"",
lesson_location:"",max_time_allowed:"",mode:"normal",objectives:{_children:"id,score,lesson_status,description",_count:"0"},progress_measure:"",scaled_passing_score:"0.7",score:{_children:"scaled,raw,min,max",scaled:"",raw:"",min:"",max:""},session_time:"PT0H0M0S",suspend_data:"",time_limit_action:"",total_time:"PT0H0M0S"}},x),n={},r={0:"No error",101:"General exception",102:"General Initialization Failure",103:"Already Initialized",104:"Content Instance Terminated",111:"General Termination Failure",
112:"Termination Before Initialization",113:"Termination After Termination",122:"Retrieve Data Before Initialization",123:"Retrieve Data After Termination",132:"Store Data Before Initialization",133:"Store Data After Termination",142:"Commit Before Initialization",143:"Commit After Termination",201:"General Argument Error",301:"General Get Failure",351:"General Set Failure",391:"General Commit Failure",401:"Undefined Data Model",402:"Unimplemented Data Model Element",403:"Data Model Element Value Not Initialized",
404:"Data Model Element Is Read Only",405:"Data Model Element Is Write Only",406:"Data Model Element Type Mismatch",407:"Data Model Element Value Out Of Range",408:"Data Model Dependency Not Established"},d=this;this.isRunning=function(){return 1===f.initialized&&0===f.terminated};this.LMSInitialize=function(){u(f.prefix+":  Initializing...",3);f.cmi?(n=f.cmi,"suspend"===n.core.exit&&(n.core.entry="resume")):n=f.CMI;f.initialized=1;f.terminated=0;return"true"};this.LMSGetValue=function(a){f.errorCode=
0;var d="false";a=a.toString();var g=[];if(this.isRunning()){g=a.split(".");if(0<="|exit|session_time|".indexOf("|"+g[g.length-1]+"|"))return f.errorCode=405,"false";g=a.toLowerCase().split(".");switch(g[0]){case "cmi":d=a;a="false";switch(d){case "cmi.core.exit":case "cmi.core.session_time":f.errorCode=405;f.diagnostic="Sorry, this has been specified as a read-only value for "+d;break;case "cmi.core.student_name":a=f.CMI.learner_name;break;default:d=d.replace("cmi.core.","").replace("cmi.",""),a=
l(d,n),"undefined"===a&&(f.errorCode=401,f.diagnostic="Sorry, there was a undefined response from "+d,a="false")}d=a}return d}f.errorCode=123;return d};this.LMSSetValue=function(a,d){u(f.prefix+": SetValue: "+a+" = "+d,4);f.errorCode=0;var g=[],e=a.toString(),c=d.toString();if(this.isRunning()){var g=e.split("."),b=g[g.length-1],g="adl"===g[0]&&"id"===g[4]?!0:"comments_from_lms"===g[1]?!0:0<="|_version|completion_threshold|credit|entry|launch_data|learner_id|learner_name|_children|_count|mode|maximum_time_allowed|scaled_passing_score|time_limit_action|total_time|comment|".indexOf("|"+
b+"|");if(g)return f.errorCode=404,"false";g=e.split(".");switch(g[0]){case "cmi":switch(a){case "cmi.core.lesson_location":1E3<c.length&&u(f.prefix+": Some LMS's might truncate your bookmark as you've passed "+c.length+" characters of bookmarking data",2);break;case "cmi.core.lesson_status":if(-1==="|passed|completed|failed|incomplete|browsed|not attempted|unknown|".indexOf("|"+c+"|"))return m(a,c);q(a,c);break;case "cmi.core.exit":if(-1==="|time-out|suspend|logout|normal||".indexOf("|"+c+"|"))return m(a,
c);break;case "cmi.core.score.min":g=parseFloat(c);if("number"!=typeof g||isNaN(g))return v(a,c);f.CMI.score.min=g;break;case "cmi.core.score.max":g=parseFloat(c);if("number"!=typeof g||isNaN(g))return v(a,c);f.CMI.score.max=g;break;case "cmi.core.score.raw":g=parseFloat(c);if("number"!=typeof g||isNaN(g))return v(a,c);var l=parseFloat(f.CMI.score.max),l="number"!=typeof l||isNaN(l)?100:l,b=parseFloat(f.CMI.score.min),b="number"!=typeof b||isNaN(b)?0:b,l=l-b;0>=l&&(l=100);g=Math.max(0,Math.min(1,
(g-b)/l));q("cmi.score.scaled",g)}e=e.replace("cmi.core.","").replace("cmi.","");t(e,c,n)}return"true"}f.errorCode=f.terminated?133:132;return"false"};this.LMSCommit=function(){$(d).triggerHandler({type:"StoreData",runtimedata:n});return"true"};this.LMSTerminate=function(){d.LMSCommit();f.terminated=1;f.initialized=0;return"true"};this.LMSFinish=function(){d.LMSCommit();f.terminated=1;f.initialized=0;return"true"};this.LMSGetErrorString=function(a){return""!==a&&(a=parseInt(a,10),void 0!==r[a])?r[a]:
""};this.LMSGetLastError=function(){return f.errorCode};this.LMSGetDiagnostic=function(){return f.diagnostic};this.addListener=function(a,d){"string"==typeof a&&"function"==typeof d&&(f.listeners[a]=d)};this.setCMILMSValue=function(a,d){"string"==typeof a&&(f.CMI[a]=d)}};
